{% extends 'base.html' %}
{% load static %}
{% load video_embed %}

{% block content %}
<div class="project-detail card">
  <h2 class="project-title">{{ project.title }}</h2>

  {% if project.description %}
    <p class="project-description">{{ project.description }}</p>
  {% endif %}

  {% if project.tools.all %}
    <ul class="tools-list">
      {% for tool in project.tools.all %}
        <li>{{ tool.name }}</li>
      {% endfor %}
    </ul>
  {% endif %}
    <div class="project-links">
        {% if project.link %}
        <a href="{{ project.link }}" class="project-link">üåê Live Project</a>
        {% endif %}
        {% if project.github_repo %}
        <a href="{{ project.github_repo }}" class="project-link">üíª GitHub Repo</a>
        {% endif %}
    </div>
  {% if project.demo_video %}
    <div class="video-container">
      <iframe width="560" height="315"
              src="{{ project.demo_video|video_embed }}"
              frameborder="0" allowfullscreen></iframe>
    </div>
  {% endif %}

  {% if project.screenshots.all %}
    <div class="slider-container">
      {% for screenshot in project.screenshots.all %}
        <div class="slider-item">
          <img src="{{ screenshot.image.url }}"
               alt="Screenshot {{ forloop.counter }}"
               class="zoomable-img"
               tabindex="0"
               data-caption="{{ screenshot.caption|default:'' }}"
               data-explanation="{{ screenshot.explanation|default:'' }}">
          {% if screenshot.caption %}
            <div class="caption">{{ screenshot.caption }}</div>
          {% endif %}
          {% if screenshot.explanation %}
            <div class="explanation">{{ screenshot.explanation }}</div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% elif project.image %}
    <div class="slider-container">
      <div class="slider-item">
        <img src="{{ project.image.url }}"
             alt="{{ project.title }}"
             class="zoomable-img"
             tabindex="0"
             data-caption=""
             data-explanation="">
      </div>
    </div>
  {% endif %}

  <div class="project-links">
    {% if project.link %}
      <a href="{{ project.link }}" class="project-link">üåê Live Project</a>
    {% endif %}
    {% if project.github_repo %}
      <a href="{{ project.github_repo }}" class="project-link">üíª GitHub Repo</a>
    {% endif %}
  </div>

  {% if project.readme_file %}
    <a href="{{ project.readme_file.url }}" class="project-link">üìÑ View README</a>
  {% endif %}
</div>

<!-- We DO NOT place the overlay markup here to avoid any parent transform issues.
     The script will create and append it directly to <body> at runtime. -->

<script src="{% static 'js/project_modal.js' %}"></script>
{% endblock %}
